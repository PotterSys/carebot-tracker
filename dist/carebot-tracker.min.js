/*! carebot-tracker - v0.5.0 - 2016-03-02 */
!function(a){"function"==typeof define&&define.amd?define(a):"undefined"!=typeof module&&module.exports?module.exports=a():window.CarebotTracker=a.call(this)}(function(){var a={};return a.Timer=function(a){function b(a){var b,c;if(60>a){var d=10*Math.floor(a/10);c=d.toString()+"s"}else if(a>=60&&300>a)b=Math.floor(a/60),c=b.toString()+"m";else{b=Math.floor(a/60);var e=5*Math.floor(b/5);c=e.toString()+"m"}return c}function c(){var c=b(f);c!==e&&(a({bucket:c,seconds:f}),e=c)}function d(a){f+=a,c()}var e,f=0;return{add:d,getTimeBucket:b}}.bind(this),a.VisibilityTracker=function(b,c,d){var e=new a.Timer(function(a){c(a)});$.screentime({fields:[{selector:"#"+b,name:"graphic"}],callback:function(a){e.add(a.graphic)}})},a.ScrollTracker=function(a,b,c){function d(){var a,b,c=document.body,d=document.documentElement;return window.hasOwnProperty("pageYOffset")?(a=window.pageYOffset,b=window.pageXOffset):d.hasOwnProperty("scrollTop")?(a=d.scrollTop,b=d.scrollLeft):(a=c.scrollTop,b=c.scrollLeft),{scrollTop:a,scrollLeft:b}}function e(a){var b=a.getBoundingClientRect(),c=document.body,e=document.documentElement,f=d(),g=f.scrollTop,h=f.scrollLeft;window.hasOwnProperty("pageYOffset")?(g=window.pageYOffset,h=window.pageXOffset):e.hasOwnProperty("scrollTop")?(g=e.scrollTop,h=e.scrollLeft):(g=c.scrollTop,h=c.scrollLeft);var i=e.clientTop||c.clientTop||0,j=e.clientLeft||c.clientLeft||0,k=b.top+g-i,l=b.left+h-j;return{top:Math.round(k),left:Math.round(l)}}function f(){var a=e(k).top,b=k.offsetHeight,c=d().scrollTop,f=c+window.innerHeight,g=(f-a)/b;return g}function g(a){return 10*Math.round(10*a)}function h(){var a=f(),c=g(a);c>l&&(l=c,b(c))}var i=100;console.log("Setting up scrollTracker",c);var j,k=document.getElementById(a),l=0;window.addEventListener("scroll",function(a){j&&window.clearTimeout(j),j=window.setTimeout(h,i)})},a});